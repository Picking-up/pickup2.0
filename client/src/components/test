import React, { Component, PropTypes } from 'react';
import { reduxForm } from 'redux-form';
import { PostEvent } from '../actions/post';
import { Link, browserHistory } from 'react-router';



class PostGame extends Component {
  constructor(props) {
    super(props);
    this.onSubmit = this.onSubmit.bind(this);
  }

  static Post = {
    PostEvent: PropTypes.func,
    handleSubmit: PropTypes.func,
    fields: PropTypes.object
  }

  onSubmit(props){
    console.log(this.props,'this is a submit')
    this.props.PostEvent(props);

  }

  render(){
    const { handleSubmit, fields: { location, sports, players }} = this.props;
    return (
      <form onSubmit={handleSubmit(this.onSubmit)}>
        <h3>Add Event</h3>

        <div>
          <label>location</label>
          <input type='text' placeholder='location' {...location} />
        </div>

        <div>
          <label>sports</label>
          <input placeholder='sports' type='text' {...sports}/>
        </div>

        <div>
          <label>players</label>
          <input placeholder='players' type='text' {...players}/>
        </div>

        <div>
          <button type='submit' className='btn btn-primary'>Submit</button>
          <Link to='/map' className='btn btn-primary'>canel</Link>
        </div>
      </form>
    )
  }
}


function validate(value){
  const errors = {};
  if(!value.location){
    errors.location='enter a location';
  }
  if(!value.sports){
    errors.sports='enter a sport';
  }
  if(!value.players){
    errors.players='enter number of player';
  }
  return errors;
}

function mapStateToProps(state) {
  console.log(state,'mapStateToProps')
 return {};
}

export default reduxForm({
  form: 'postNewForm' ,
  fields: ['location','sports', 'players'],
  validate
},mapStateToProps,{PostEvent})(PostGame);
